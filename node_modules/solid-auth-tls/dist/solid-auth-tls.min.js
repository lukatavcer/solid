!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SolidAuthTLS=t():n.SolidAuthTLS=t()}(this,function(){return function(n){function t(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return n[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var e={};return t.m=n,t.c=e,t.i=function(n){return n},t.d=function(n,e,i){t.o(n,e)||Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:i})},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=3)}([function(n,t,e){"use strict";n.exports={authEndpoint:"",fallbackAuthEndpoint:"https://databox.me/",signupEndpoint:"https://solid.github.io/solid-idps/",signupWindowHeight:600,signupWindowWidth:1024,key:"",cert:""}},function(n,t,e){"use strict";function i(n){return n=Object.assign({},u,n),o(s.PRIMARY,n).then(function(t){return t||o(s.SECONDARY,n)})}function o(n,t){return r(n,t)}function r(n,t){var e=void 0;switch(n){case s.PRIMARY:e=t.authEndpoint||window.location.origin+window.location.pathname;break;case s.SECONDARY:e=t.fallbackAuthEndpoint}return new Promise(function(n,t){var i=new XMLHttpRequest;i.withCredentials=!0,i.addEventListener("load",function(){n(i.getResponseHeader("user")||null)}),i.addEventListener("error",function(n){t(n)}),i.open("HEAD",e),i.send()})}var u=(function(){function n(n,t){var e=[],i=!0,o=!1,r=void 0;try{for(var u,s=n[Symbol.iterator]();!(i=(u=s.next()).done)&&(e.push(u.value),!t||e.length!==t);i=!0);}catch(n){o=!0,r=n}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return e}}(),e(0)),s={PRIMARY:0,SECONDARY:1},c=i;n.exports={currentUser:c,login:i}},function(n,t,e){"use strict";function i(n){this.config=n||o}var o=e(0);i.prototype.listen=function(){return new Promise(function(n,t){var e=window.addEventListener?"addEventListener":"attachEvent";(0,window[e])("attachEvent"===e?"onmessage":"message",function(e){var i=e.data;if("User:"===i.slice(0,5)){var o=i.slice(5,i.length);return o&&o.length>0&&"http"===o.slice(0,4)?n(o):t(o)}},!0)})},i.prototype.signup=function(n){n=n||this.config.signupEndpoint;var t=this.config.signupWindowWidth,e=this.config.signupWindowHeight,i=window.screen.width/2-(t/2+10),o=window.screen.height/2-(e/2+50),r=n+"?origin="+encodeURIComponent(window.location.origin),u="resizable,scrollbars,status,width="+t+",height="+e+",left="+i+",top="+o;window.open(r,"Solid signup",u);var s=this;return new Promise(function(n){s.listen().then(function(t){return n(t)})})},n.exports=i},function(n,t,e){"use strict";var i=e(1);n.exports={Signup:e(2),login:i.login,currentUser:i.currentUser}}])});